% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/scale_z.R
\name{scale_z}
\alias{scale_z}
\title{Scale Z Values with Cumulative Threshold Filtering}
\usage{
scale_z(grid, threshold = 0.95)
}
\arguments{
\item{grid}{A data frame containing columns \code{x}, \code{y}, and \code{z}.}

\item{threshold}{A numeric value between 0 and 1 specifying the cumulative proportion of \code{z} values to retain. Default is \code{0.95}.}
}
\value{
A data frame with the same structure and row order as the input \code{grid}, with filtered and scaled \code{z} values.
}
\description{
This function processes a prediction grid by filtering and scaling its \code{z} values.
It first sorts the grid by descending \code{z}, then cumulatively sums the values until a specified threshold is reached.
All remaining \code{z} values beyond the threshold are set to zero.
Finally, the remaining \code{z} values are linearly scaled to the range \link{0, 1}, with the maximum value becoming 1.
The original row order of the input grid is preserved in the output.
}
\examples{
\dontrun{
grid <- expand.grid(x = seq(0, 1000, length.out = 50),
                    y = seq(0, 1000, length.out = 50))
grid$z <- with(grid, exp(-((x - 500)^2 + (y - 500)^2) / 1e5))
scaled_grid <- scale_z(grid, threshold = 0.95)
}
}
